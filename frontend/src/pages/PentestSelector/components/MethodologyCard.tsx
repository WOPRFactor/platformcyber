import React from 'react'
import { Clock, AlertTriangle } from 'lucide-react'
import type { PentestMethodology } from '../../../lib/api/pentestSelector/types'
import { getMethodologyIcon, getMethodologyColor, getDifficultyColor } from '../utils/colorUtils.tsx'

interface MethodologyCardProps {
  methodologyKey: string
  methodology: PentestMethodology
  isSelected: boolean
  onSelect: () => void
  onViewWorkflow: () => void
}

export const MethodologyCard: React.FC<MethodologyCardProps> = ({
  methodologyKey,
  methodology,
  isSelected,
  onSelect,
  onViewWorkflow
}) => {
  return (
    <div
      className={`border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-lg ${getMethodologyColor(methodologyKey)} ${
        isSelected ? 'ring-2 ring-offset-2 ring-blue-500' : ''
      }`}
      onClick={onSelect}
    >
      <div className="flex items-center gap-4 mb-4">
        <div className="text-blue-600">
          {getMethodologyIcon(methodologyKey)}
        </div>
        <div>
          <h3 className="text-xl font-bold">{methodology.name}</h3>
          <p className="text-gray-600">{methodology.description}</p>
        </div>
      </div>

      <div className="grid grid-cols-2 gap-4 mb-4">
        <div className="flex items-center gap-2">
          <Clock className="w-4 h-4 text-gray-500" />
          <span className="text-sm">{methodology.estimated_time}</span>
        </div>
        <div className="flex items-center gap-2">
          <AlertTriangle className="w-4 h-4 text-gray-500" />
          <span className={`px-2 py-1 text-xs rounded-full font-medium ${getDifficultyColor(methodology.difficulty)}`}>
            {methodology.difficulty.replace('_', ' ').toUpperCase()}
          </span>
        </div>
      </div>

      <div className="space-y-2">
        <div>
          <span className="text-sm font-medium text-gray-700">Alcance:</span>
          <p className="text-sm text-gray-600">{methodology.scope}</p>
        </div>
        <div>
          <span className="text-sm font-medium text-gray-700">Acceso:</span>
          <p className="text-sm text-gray-600">{methodology.access_level}</p>
        </div>
      </div>

      <div className="mt-4 flex items-center justify-between">
        <span className="text-sm text-gray-500">{methodology.phases.length} fases</span>
        <button
          onClick={(e) => {
            e.stopPropagation()
            onViewWorkflow()
          }}
          className="text-blue-600 hover:text-blue-800 text-sm font-medium"
        >
          Ver Workflow â†’
        </button>
      </div>
    </div>
  )
}

